<HTML>
<HEAD>
<TITLE>Emory University | The Belfast Group | XML Search</TITLE>
<META http-equiv="Content-Type" content="text/html;
      charset=iso-8859-1">
<script language="javascript">

function getRetrieve () {
  for (var i=0; i < document.query.retrieve.length; i++) {
    if (document.query.retrieve[i].checked) {
      var val = document.query.retrieve[i].value;
    }
  }
// alert("retrieve is "+val);
 return val;
}


function submitForm () {

var addquery = '';
if (document.query.string2.value != '') {
  var addquery = "' " + document.query.operator.value + " "  +
	document.query.region2.value + "~='" + 
	document.query.string2.value;
}

var db = document.query.db.value;
var dbcollection;

 switch (db) {
     case 'daap':
           dbcollection = "DAAP"; 
           break;
      case 'ampoet':
           dbcollection = "AMPOET"; 
           break;
      default:
           dbcollection = "POETRY";
} 

var stylesheet = '';
if (db == 'faber') {
      stylesheet = "&_xslsrc=xsl:stylesheet/contents.xsl";
}

var mode = '';
if (getRetrieve() == "/poetgrp/chad/doc/div/div/poem") {
  mode = "&xslt_mode=poem";
}

var newurl = "http://tamino.library.emory.edu/passthru/servlet/transform/tamino/"
      + dbcollection + "/" +  db + "?_xql(1," +  
  	document.query.maxdisplay.value + ")=" + 
	getRetrieve() + "[" + document.query.region.value + "~='" + 
    	document.query.string.value + addquery +  "']"
      + stylesheet + mode;


//alert(newurl);
document.location.href = newurl;

}




</script>


</HEAD>
<BODY bgcolor="#ffffff">

        <p><font face="Arial, Helvetica, sans-serif"><font face="MS Sans Serif,Arial"><h1>Poetry Search</h1></font>

<center><hr width=80%>
<table border=0 width=80%>

<p>
<form name="query" 
      action="javascript:submitForm()">

<table><tr>
<td colspan="2">
Select Database:<br>
<select name="db">
  <option value="faber">Faber Poetry Library</option>
  <option value="ampoet">American Poetry: 
			  The American Poetry Full-Text Database</option> 
  <option value="daap">Database of African American Poetry</option>
  <option value="yeats">The W. B. Yeats Collection</option>
</select> 
<hr>
</td>
</tr>
<tr>

  <td><font face="Arial,Helvetica,Geneva" size=-1>Search for:</font></td>
  <td><font face="Arial,Helvetica,Geneva" size=-1>in:</font></td>
  </tr>
<tr>

<td><input type="text" size="30" name="string"></td>
<td>

<select name="region">
  <option selected value=".">Entire Document</option> 
<!-- FIXME: poem/@name for Volume mode, @name for poem mode -->
  <option value="@name" name="poemtitle">Poem Title</option>
  <option value="firstl">First Line</option>
  <option value="epigraph">Epigraph</option>
<!--  <option value="[//docAuthor">Poet</option> -->
<!--   <option value="[text//titlePart">Poem Title</option> -->
</select> 
</td>
<td>
 <select name="operator">
   <option value="and">and</option>
   <option value="or">or</option>
</td>
<tr>
<tr>
<td><input type="text" size="30" name="string2"></td>
<td>
<select name="region2">
  <option selected value=".">Entire Document</option> 
<!--
  <option value="[//poem/@name">Poem Title</option>
  <option value="[//firstl">First Line</option>
  <option value="[//epigraph">Epigraph</option> -->
<!--  <option value="//docAuthor">Poet</option> -->
<!--  <option value="text//titlePart">Poem Title</option> -->
</select> 
</td>

</table>

<!-- 
<table cellspacing="8" border=0>
<tr><td>Sort by:</td>
<td>
  <input type="radio" name="sort" value="bibl/date/@value" checked> Date</td>
<td>
  <input type="radio" name="sort" value="@type"> Article Type</td>
<td> 
  <input type="radio" name="sort" value="head"> Title</td>
</tr></table>
 -->

<table cellspacing="8" border="0">
<tr><td>Return results by:</td>
<td>
<input type="radio" name="retrieve" value="/poetgrp/chad/doc/div/div">Volume
</td>
<td>
<input type="radio" name="retrieve" value="/poetgrp/chad/doc/div/div/poem" 
	checked>Poem 
</td>
<td><font size="-1"><i>(Not yet fully implemented)</i></font></td>
</tr><table>



<p align="left">
Results to display per page:
<select name="maxdisplay">
  <option value="10">10</option>
  <option selected value="20">20</option>
  <option value="50">50</option>
  <option value="100">100</option>
</select>
</p>



<p align="left">
<input type="submit" value="Search">
<input type="reset" value="Reset">
</p>

</form>
</table>

</table>

<br>
<br>
                <center>
                <hr width=80%>
                        &nbsp;&nbsp;<a href="http://chaucer.library.emory.edu/">Lewis H. Beck Center</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://poetry.emory.edu/">EPP Home Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://www.emory.edu/">Emory University</a>&nbsp;&nbsp;

  
  
</center>
</BODY>
</HTML>
